#!/bin/sh

urlfile=~/.local/share/base
case $1 in
	-a|-add) printf '%s' "pon nombre del marcador: " && read -r nombre \
		&& printf '%s' "pon url: " && read -r url && printf "$nombre - $url" >> $urlfile;;
	-d|-r) a="$(cat $urlfile | fzf --reverse --cycle --prompt='eliminar entrada: ' )" \
		&& sed -i "/$a/d" $urlfile;;
	-h|--help) printf "opciones son -add, -d\\n";;
	-e|e) $EDITOR $urlfile ;;
esac

[ -n "$1" ] && exit

enginelist=$(grep -v '^#' $urlfile | dmenu -i -l 20 -sb '#898818' -p 'marcadores web:') || exit

engineurl=$(printf '%s\n' "$enginelist" | cut -d'-' -f2,3 |cut -c 2- |tr ' ' '+')
#engineurl=$(printf '%s\n' "$enginelist" | awk '{$1=$2=""; print $0}' | cut -c 3- | tr ' ' '+')
pidof -q $BROWSER && $BROWSER "$engineurl" || setsid -f $BROWSER "$engineurl"
